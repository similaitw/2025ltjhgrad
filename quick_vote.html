<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>ç•¢æ¥­æ­ŒæŠ•ç¥¨</title>
<style>
body{background:#111;color:#fff;font-family:sans-serif;text-align:center;margin:0}
h1{padding:20px 0}
.song{background:#222;border-radius:12px;margin:20px auto;max-width:720px;padding:10px}
.song iframe{width:100%;height:300px;border:none;border-radius:8px}
.info{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
button{background:#1e88e5;border:none;color:#fff;padding:8px 16px;border-radius:6px;cursor:pointer}
button:hover{background:#1565c0}
.title{font-weight:bold}
</style>
</head>
<body>
<h1>ğŸµ ç•¢æ¥­æ­Œæ›²ç¥¨é¸</h1>

<div class="song">
  <iframe src="https://www.youtube.com/embed/wBXRvmNsEmM?rel=0&modestbranding=1" allowfullscreen></iframe>
  <div class="info">
    <span class="title">æ­Œæ›² 1</span>
    <span class="count" id="count-æ­Œæ›² 1">0</span> ç¥¨
    <button onclick="vote('æ­Œæ›² 1')">æŠ•ç¥¨</button>
  </div>
</div>

<div class="song">
  <iframe src="https://www.youtube.com/embed/VKfdd0EZsqI?rel=0&modestbranding=1" allowfullscreen></iframe>
  <div class="info">
    <span class="title">æ­Œæ›² 2</span>
    <span class="count" id="count-æ­Œæ›² 2">0</span> ç¥¨
    <button onclick="vote('æ­Œæ›² 2')">æŠ•ç¥¨</button>
  </div>
</div>

<div class="song">
  <iframe src="https://www.youtube.com/embed/X3rh1fQrXcw?rel=0&modestbranding=1" allowfullscreen></iframe>
  <div class="info">
    <span class="title">æ­Œæ›² 3</span>
    <span class="count" id="count-æ­Œæ›² 3">0</span> ç¥¨
    <button onclick="vote('æ­Œæ›² 3')">æŠ•ç¥¨</button>
  </div>
</div>

<div class="song">
  <iframe src="https://www.youtube.com/embed/FXiDZ7q8x8k?rel=0&modestbranding=1" allowfullscreen></iframe>
  <div class="info">
    <span class="title">æ­Œæ›² 4</span>
    <span class="count" id="count-æ­Œæ›² 4">0</span> ç¥¨
    <button onclick="vote('æ­Œæ›² 4')">æŠ•ç¥¨</button>
  </div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbyu_MTDHN0tmsbBck39gDU_wMoMdseR3VMTI0Am14QLdceTYU2xLYiPM4KABHvfNK36FA/exec";

// é€å‡ºæŠ•ç¥¨
function vote(song){
  fetch(API,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({song})
  })
  .then(r=>r.text())
  .then(txt=>{
     alert("âœ… æ„Ÿè¬æŠ•ç¥¨ï¼");
     loadCounts();
  })
  .catch(err=>alert("âš ï¸ ç„¡æ³•é€å‡ºï¼š"+err));
}

// è®€å–ç›®å‰ç¥¨æ•¸
function loadCounts(){
  fetch(API)
    .then(r=>r.json())
    .then(data=>{
      for(const s in data){
        const el=document.getElementById("count-"+s);
        if(el) el.textContent=data[s];
      }
    })
    .catch(()=>{/* å¯å¿½ç•¥ */});
}
loadCounts();
</script>
</body>
</html>
